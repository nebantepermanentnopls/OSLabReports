# Отчет по лабораторной работе №2

## Основные понятия 

Кратко разберем понятия, с которыми связана данная лаболаторная работа.

**RAID**(Redundant Array of Independent(Inexpensive) Disks) - технология объединения дисковых пространств в логические 
модули для повышения уровня сохранности данных и отказоустойчивости.

**LVM**(logical volume manager) - технология распределения пространства диска на логические тома, размер которых можно изменять во время 
работы(без переустановки системы).

Диски в linux именуются в зависимости от технологии подключения и порядкового номера на шине, например: диск SATA/SCSI, 
порядковый номер подключения к шине которого наименьший, будет называться sda(sata disk "a"). С ростом номера подключения 
будет изменятся буква в конце именования(sdb, sdb и т.д.).

**Раздел диска** - часть долговременной памяти диска,состоящая из смежных блоков, с определенной файловой системой.

**Таблица разделов** - часть главной загрузочной записи(нулевой сектор диска, который используется при загрузке компьютера),
состоящая из четырех записей по 16 байт. Каждая запись содержит информацию об одном из разделов жёсткого диска. Для 
создания более четырёх разделов используются расширенные разделы(сейчас не об этом).

**GRUB**(GRand Unified Bootloader) - загрузчик операционных систем. Позволяет иметь несколько установленных операционных 
систем.

## Задание 1

1) При установке ОС настроили RAID и логические тома(как в [пояснении](https://github.com/nebantepermanentnopls/OS/tree/master/admin/lab2)),
получили следующую картину:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image1.jpg)

2) Копируем содержимое раздела /boot с диска sda на sdb и смотрим информацию о дисках с помощью ```fdisk -l```
(флаг ```-l``` используется для просмотров всех доступных разделов).

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image2.jpg)
![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image3.jpg)
![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image4.jpg)

Утилита вывела информацию о дисках(sda, sdb), разделах(sda1, sdb1 и т.д.), которые содержатся на этих дисках,
RAID-массиве(md0) и логических томах(root, var, log), которые мы создали.

3) Используем команду ```lsblk -o NAME,SIZE,FSTYPE,TYPE,MOUNTPOINT```, получив следующий результат:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image5.jpg)

Команда вывела дерево дисковых пространств и инфрмацию(размер, тип файловой системы, тип пространства, 
точка монтирования)  о каждой части дерева.

4) Устанавливаем grub на диск sdb командой ```grub-install /dev/sdb```:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image6.jpg)

5) Просматриваем информацию о физических томах(команда ```pvs```), логических группах(```vgs```) и логических
томах(команда ```lvs```), получаем:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image7.jpg)

Команда ```pvs``` вывела все содержащиеся в системе физические тома(у нас это md0), их размер, атрибуты и
логическую группу, которую содержит физический том.
Команда ```vgs``` вывела информацию(кол-во логических томов, размер, атрибуты) о единственной логической группе system.
Команда ```lvs``` показывает группу, атрибуты и размер каждого логического тома в системе.

6) Чтобы узнать информацию о RAID открываем для чтения файл /proc/mdstat:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image8.jpg)

Данная команда показала активные диски в нашем RAID-массиве. В нашем массиве оба объединенных раздела(sda1 и sdb2) функционируют.

В ходе данного задания мы объединили разделы двух дисков в RAID-массив, получившийся раздел мы разбила на логические тома(настроили LVM).

## Задание 2

1) Удалили диск ssd1 из машины:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image9.jpg)

После перезагрузок машина не утратила свою работоспособность.

2) Проверим статус массива ```cat /proc/mdstat```, получили следующий вывод:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image10.jpg)

Как видим, в массиве находится только один раздел(sda2).

3) Подключаем к машине новый диск ssd3, при включении загрузка происходила с диска, номер порта которого меньше, а мы не переключали ssd2 к "меньшему" порту, поэтому при загрузке нажимаем на F12 и загружаемся со второго диска.

4)Выполняем команду ```fdisk -l```, которая покажет нам, видит ли ОС новый диск.

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image12.jpg)

В выводе можно увидеть новый диск(sda) в нем нет разделов. Название прошлого диска изменилось на sdb из-за того, что именования дисков строятся по номеру порта.

5) Копируем таблицу разделов командой ```sfdisk -d /dev/sdb | sfdisk /dev/sda```, флаг ```-d``` позволяет получить информацию в формате, ориентированном на применение утилиты sfdisk для изменения таблицы разделов(эту утилиту можно использовать просто для получения информации).

6) После копирования на sda появились разделы sda1 и sda2.

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image13.jpg)

7) Добавил новый диск в массив:

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image14.jpg)

Вывод команды ```cat proc/mdstat``` показывает, что началась синхронизация.

8) После синхронизации массива копируем загрузочный раздел на новый диск и устанавливаем grub.

![](https://github.com/nebantepermanentnopls/OSLabReports/blob/master/lab2/images/image15.jpg)

9)Машина сохранила работоспособность после перезагрузки.

В ходе задания, устроив отказ одного из дисков RAID-массива(ssd1), мы добавили  в RAID новый диск ssd3 и синхронизировали его с ssd2.


